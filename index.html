<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Artisan Code Cafe | Order Online</title>
    
    <!-- Self-contained CSS for professional UI/UX -->
    <style>
        /* --- DESIGN SYSTEM & GLOBAL STYLES --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Cousine:wght@400;700&display=swap');

        :root {
            --bg-color: #f4f7f9;
            --surface-color: #ffffff;
            --primary-color: #6d5ed3;
            --primary-light: #e9e6ff;
            --secondary-color: #f5a623;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --success-color: #28a745;
            --danger-color: #dc3545;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.07);
            --border-radius: 12px;
            --font-main: 'Poppins', sans-serif;
            --font-mono: 'Cousine', monospace;
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-main);
            margin: 0;
            background-color: var(--bg-color);
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* --- LAYOUT & CONTAINERS --- */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .main-header {
            text-align: center;
            padding-bottom: 30px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 40px;
        }

        .main-header h1 {
            font-size: 2.5rem;
            margin: 0;
            font-weight: 700;
        }

        .main-header p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-top: 8px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 40px;
            align-items: flex-start;
        }

        .cart-section {
            position: sticky;
            top: 30px;
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            padding: 25px;
        }

        /* --- MENU ITEM STYLING --- */
        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 30px;
        }

        .menu-item {
            background-color: var(--surface-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .menu-item:hover {
            transform: translateY(-8px);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        }

        .menu-item-image {
            width: 100%;
            height: 200px;
            overflow: hidden;
        }

        .menu-item-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.4s ease;
        }
        
        .menu-item:hover .menu-item-image img {
            transform: scale(1.05);
        }

        .menu-item-content {
            padding: 20px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .menu-item-content h3 {
            margin: 0 0 10px 0;
            font-size: 1.25rem;
            font-weight: 600;
        }

        .menu-item-content p {
            flex-grow: 1;
            color: var(--text-secondary);
            font-size: 0.95rem;
            margin-bottom: 20px;
        }
        
        .menu-item-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .price {
            font-weight: 700;
            font-size: 1.4rem;
            color: var(--primary-color);
        }

        .add-to-cart-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            font-size: 0.9rem;
            transition: background-color 0.2s, transform 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .add-to-cart-btn svg {
             width: 16px; height: 16px;
        }

        .add-to-cart-btn:hover {
            background-color: #584bad;
            transform: scale(1.05);
        }

        .add-to-cart-btn.added {
            background-color: var(--success-color);
            cursor: not-allowed;
        }

        /* --- CART STYLING --- */
        .cart-section h2 {
            margin-top: 0;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--border-color);
            font-size: 1.5rem;
        }

        #cart-items {
            list-style-type: none;
            padding: 0;
            margin: 0;
            max-height: 300px;
            overflow-y: auto;
        }

        .cart-item {
            display: flex;
            align-items: center;
            padding: 15px 5px;
            transition: background-color 0.2s, opacity 0.3s;
            opacity: 1;
            transform: translateX(0);
        }

        .cart-item:not(:last-child) {
            border-bottom: 1px solid var(--border-color);
        }

        .cart-item-info {
            flex-grow: 1;
        }
        .cart-item-info span { display: block; }
        .item-name { font-weight: 600; }
        .item-price { font-size: 0.9rem; color: var(--text-secondary); }

        .cart-item-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn, .remove-btn {
            background: none;
            border: 1px solid var(--border-color);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.2s, color 0.2s;
        }
        
        .quantity-btn:hover, .remove-btn:hover {
            background-color: var(--primary-light);
            border-color: var(--primary-color);
        }

        .remove-btn:hover {
            background-color: #ffe8e8;
            border-color: var(--danger-color);
            color: var(--danger-color);
        }

        .item-quantity {
            font-weight: 600;
            min-width: 20px;
            text-align: center;
        }

        .cart-summary {
            margin-top: 25px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1rem;
        }
        
        #cart-total {
            font-weight: 700;
            font-size: 1.5rem;
        }

        .cart-actions {
            margin-top: 25px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .cart-btn {
            padding: 15px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            font-weight: 600;
            transition: opacity 0.2s, transform 0.2s;
        }

        .cart-btn:hover:not(:disabled) {
            transform: scale(1.02);
        }

        .cart-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        #submit-order-btn {
            background-color: var(--primary-color);
            color: white;
        }

        #empty-cart-btn {
            background-color: #f1f5f9;
            color: var(--text-secondary);
        }

        #cart-error {
            color: var(--danger-color);
            margin-top: 15px;
            font-weight: 500;
            text-align: center;
            display: none;
        }
        
        .cart-empty-message {
            text-align: center;
            color: var(--text-secondary);
            padding: 40px 10px;
            font-style: italic;
        }
        
        /* --- RECEIPT MODAL --- */
        .receipt-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(30, 41, 59, 0.6);
            backdrop-filter: blur(5px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0s 0.3s;
        }

        .receipt-modal-overlay.visible {
            opacity: 1;
            visibility: visible;
            transition: opacity 0.3s ease;
        }

        .receipt-modal-content {
            background-color: var(--surface-color);
            padding: 40px;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 480px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.25);
            transform: translateY(20px) scale(0.95);
            transition: transform 0.3s ease;
        }
        
        .receipt-modal-overlay.visible .receipt-modal-content {
            transform: translateY(0) scale(1);
        }
        
        .receipt-header {
            text-align: center;
            border-bottom: 2px dashed #ccc;
            padding-bottom: 20px;
            margin-bottom: 20px;
        }
        
        .receipt-header h2 { margin: 0; color: var(--primary-color); }
        .receipt-header p { margin: 5px 0 0; color: var(--text-secondary); }
        
        .receipt-details { font-family: var(--font-mono); margin-bottom: 25px; }
        .receipt-details div { display: flex; justify-content: space-between; padding: 4px 0; }

        .receipt-items-table {
            width: 100%;
            border-collapse: collapse;
            font-family: var(--font-mono);
            margin-bottom: 25px;
        }

        .receipt-items-table th, .receipt-items-table td {
            text-align: left;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .receipt-items-table th:nth-child(2), .receipt-items-table td:nth-child(2) { text-align: center; }
        .receipt-items-table th:last-child, .receipt-items-table td:last-child { text-align: right; }
        
        .receipt-total {
            font-family: var(--font-mono);
            font-size: 1.3em;
            font-weight: 700;
            text-align: right;
        }
        
        .receipt-actions {
            margin-top: 30px;
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* --- RESPONSIVENESS --- */
        @media (max-width: 992px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            .cart-section {
                position: static;
            }
        }
        @media (max-width: 480px) {
            .main-header h1 { font-size: 2rem; }
            .cart-item { flex-direction: column; align-items: flex-start; gap: 10px; }
            .cart-item-controls { width: 100%; justify-content: space-between; }
        }

        /* --- PRINT STYLES --- */
        @media print {
            body * { visibility: hidden; }
            .receipt-modal-overlay, .receipt-modal-content, .receipt-modal-content * {
                visibility: visible;
            }
            .receipt-modal-overlay {
                position: absolute; left: 0; top: 0; width: 100%; height: auto;
                background: none; backdrop-filter: none; display: block !important;
            }
            .receipt-modal-content {
                box-shadow: none; border: 1px solid #000; margin: 0; max-width: 100%;
                border-radius: 0; padding: 20px;
            }
            .receipt-actions { display: none; }
        }
    </style>
</head>
<body>

    <!-- Header Section -->
    <header class="main-header">
        <h1>The Artisan Code Cafe</h1>
        <p>Expertly crafted coffee and pastries for the discerning developer.</p>
    </header>

    <main class="container">
        <!-- Main Content Grid -->
        <div class="main-content">
            
            <!-- Menu Section -->
            <section class="menu-section">
                <div class="menu-grid" id="menu-grid">
                    <!-- Menu items are dynamically generated by JS -->
                </div>
            </section>

            <!-- Cart Section -->
            <aside class="cart-section">
                <h2>Your Order</h2>
                <ul id="cart-items">
                    <!-- Cart items will be dynamically inserted here -->
                </ul>
                <div class="cart-summary">
                    <div class="summary-row">
                        <span>Subtotal</span>
                        <span id="cart-subtotal">$0.00</span>
                    </div>
                    <div class="summary-row">
                        <span>Tax (8%)</span>
                        <span id="cart-tax">$0.00</span>
                    </div>
                    <div class="summary-row" id="cart-total">
                        <span>Total</span>
                        <span>$0.00</span>
                    </div>
                </div>
                <div id="cart-error"></div>
                <div class="cart-actions">
                    <button id="submit-order-btn" class="cart-btn" disabled>Submit Order</button>
                    <button id="empty-cart-btn" class="cart-btn" disabled>Empty Cart</button>
                </div>
            </aside>
        </div>
    </main>

    <!-- Receipt Modal -->
    <div class="receipt-modal-overlay" id="receipt-modal">
        <div class="receipt-modal-content">
            <div class="receipt-header">
                <h2>The Artisan Code Cafe</h2>
                <p>Thank you for your order!</p>
            </div>
            <div class="receipt-details">
                <div><span>Order #:</span> <span id="receipt-order-number"></span></div>
                <div><span>Date:</span> <span id="receipt-date"></span></div>
                <div><span>Time:</span> <span id="receipt-time"></span></div>
            </div>
            <table class="receipt-items-table">
                <thead>
                    <tr><th>Item</th><th>Qty</th><th>Subtotal</th></tr>
                </thead>
                <tbody id="receipt-items-body"></tbody>
            </table>
            <div class="receipt-total" id="receipt-total-amount">Total: $0.00</div>
            <div class="receipt-actions">
                <button id="print-receipt-btn" class="cart-btn" style="background-color: var(--success-color); color: white;">Print</button>
                <button id="close-receipt-btn" class="cart-btn" style="background-color: var(--bg-color); color: var(--text-secondary);">New Order</button>
            </div>
        </div>
    </div>

    <!-- Self-contained JavaScript for functionality -->
    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // --- DATA & STATE ---
        const TAX_RATE = 0.08;
        let cart = []; // The central state for our application
        
        const menuData = [
            { id: 1, name: "Espresso", price: 2.50, desc: "A concentrated shot of pure coffee essence.", img: "https://images.unsplash.com/photo-1511920183353-3c9c93dae217?ixlib=rb-4.0.3&q=80&w=400" },
            { id: 2, name: "Caffè Latte", price: 4.00, desc: "Rich espresso with steamed milk and a light layer of foam.", img: "https://images.unsplash.com/photo-1572442388796-11668a67e23d?ixlib=rb-4.0.3&q=80&w=400" },
            { id: 3, name: "Cappuccino", price: 3.75, desc: "The perfect balance of espresso, steamed milk, and airy foam.", img: "https://images.unsplash.com/photo-1557142046-c704a3adf364?ixlib=rb-4.0.3&q=80&w=400" },
            { id: 4, name: "Butter Croissant", price: 3.00, desc: "A flaky, buttery pastry, perfect with any coffee.", img: "https://images.unsplash.com/photo-1621588241589-133547285633?ixlib=rb-4.0.3&q=80&w=400" },
            { id: 5, name: "Matcha Latte", price: 4.50, desc: "Vibrant green tea powder blended with creamy steamed milk.", img: "https://images.unsplash.com/photo-1536256263959-770b48d82b0a?ixlib=rb-4.0.3&q=80&w=400" },
            { id: 6, name: "Avocado Toast", price: 8.50, desc: "Smashed avocado on artisanal toast, with chili flakes.", img: "https://images.unsplash.com/photo-1584365685244-86fb3f3c374a?ixlib=rb-4.0.3&q=80&w=400" }
        ];

        // --- DOM ELEMENT SELECTION ---
        const menuGrid = document.getElementById('menu-grid');
        const cartItemsList = document.getElementById('cart-items');
        const cartSubtotalEl = document.getElementById('cart-subtotal');
        const cartTaxEl = document.getElementById('cart-tax');
        const cartTotalEl = document.getElementById('cart-total').lastElementChild;
        const submitOrderBtn = document.getElementById('submit-order-btn');
        const emptyCartBtn = document.getElementById('empty-cart-btn');
        const receiptModal = document.getElementById('receipt-modal');

        // --- CORE FUNCTIONS ---
        
        /**
         * Populates the menu grid from the menuData array.
         */
        function renderMenu() {
            menuGrid.innerHTML = menuData.map(item => `
                <div class="menu-item">
                    <div class="menu-item-image">
                        <img src="${item.img}" alt="${item.name}">
                    </div>
                    <div class="menu-item-content">
                        <h3>${item.name}</h3>
                        <p>${item.desc}</p>
                        <div class="menu-item-footer">
                            <span class="price">$${item.price.toFixed(2)}</span>
                            <button class="add-to-cart-btn" data-id="${item.id}">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                                <span>Add</span>
                            </button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        /**
         * Renders the current state of the cart to the DOM.
         */
        function updateCartDisplay() {
            cartItemsList.innerHTML = ''; // Clear current display
            
            if (cart.length === 0) {
                cartItemsList.innerHTML = '<li class="cart-empty-message">Your cart is empty.</li>';
            } else {
                cart.forEach(item => {
                    const li = document.createElement('li');
                    li.className = 'cart-item';
                    li.dataset.id = item.id;
                    li.innerHTML = `
                        <div class="cart-item-info">
                            <span class="item-name">${item.name}</span>
                            <span class="item-price">$${item.price.toFixed(2)} ea.</span>
                        </div>
                        <div class="cart-item-controls">
                            <button class="quantity-btn" data-action="decrease" aria-label="Decrease quantity">-</button>
                            <span class="item-quantity">${item.quantity}</span>
                            <button class="quantity-btn" data-action="increase" aria-label="Increase quantity">+</button>
                            <button class="remove-btn" aria-label="Remove item">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="18" height="18"><path stroke-linecap="round" stroke-linejoin="round" d="M14.74 9l-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 01-2.244 2.077H8.084a2.25 2.25 0 01-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 00-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 013.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.134H8.09c-1.18 0-2.09.954-2.09 2.134v.916m7.5 0a48.667 48.667 0 00-7.5 0" /></svg>
                            </button>
                        </div>
                    `;
                    cartItemsList.appendChild(li);
                });
            }

            // Calculate and display totals
            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = subtotal * TAX_RATE;
            const total = subtotal + tax;

            cartSubtotalEl.textContent = `$${subtotal.toFixed(2)}`;
            cartTaxEl.textContent = `$${tax.toFixed(2)}`;
            cartTotalEl.textContent = `$${total.toFixed(2)}`;

            // Update button states based on cart content
            const isEmpty = cart.length === 0;
            submitOrderBtn.disabled = isEmpty;
            emptyCartBtn.disabled = isEmpty;
        }

        /**
         * Adds an item to the cart or provides visual feedback if already added.
         * @param {number} id - The ID of the item from menuData.
         * @param {HTMLElement} button - The button element that was clicked.
         */
        function addToCart(id, button) {
            const existingItem = cart.find(item => item.id === id);
            if (existingItem) {
                // If item is already in cart, simply increment quantity
                updateItemQuantity(id, 1);
            } else {
                const itemData = menuData.find(item => item.id === id);
                cart.push({ ...itemData, quantity: 1 });
            }
            
            // Provide visual feedback
            button.innerHTML = `
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" /></svg>
                <span>Added</span>
            `;
            button.classList.add('added');
            setTimeout(() => {
                button.innerHTML = `
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
                    <span>Add</span>
                `;
                button.classList.remove('added');
            }, 1500);

            updateCartDisplay();
        }

        /**
         * Updates an item's quantity in the cart.
         * @param {number} id - The item's ID.
         * @param {number} change - The amount to change quantity by (e.g., 1 or -1).
         */
        function updateItemQuantity(id, change) {
            const item = cart.find(item => item.id === id);
            if (!item) return;

            item.quantity += change;
            if (item.quantity <= 0) {
                // Remove item if quantity is zero or less
                cart = cart.filter(cartItem => cartItem.id !== id);
            }
            updateCartDisplay();
        }
        
        /**
         * Handles the order submission process.
         */
        function submitOrder() {
            if (cart.length === 0) return; // Should be prevented by disabled button, but good practice
            generateReceipt();
            receiptModal.classList.add('visible');
        }

        /**
         * Populates and displays the receipt modal.
         */
        function generateReceipt() {
            const now = new Date();
            const orderNumber = Date.now().toString().slice(-6);
            
            document.getElementById('receipt-order-number').textContent = `#${orderNumber}`;
            document.getElementById('receipt-date').textContent = now.toLocaleDateString();
            document.getElementById('receipt-time').textContent = now.toLocaleTimeString();

            const receiptItemsBody = document.getElementById('receipt-items-body');
            receiptItemsBody.innerHTML = ''; // Clear previous items

            const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const tax = subtotal * TAX_RATE;
            const total = subtotal + tax;

            cart.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.quantity}</td>
                    <td>$${(item.price * item.quantity).toFixed(2)}</td>
                `;
                receiptItemsBody.appendChild(row);
            });
            
            // Add summary rows
            receiptItemsBody.innerHTML += `
                <tr style="font-weight: bold; border-top: 2px solid #ccc; margin-top: 10px;">
                    <td colspan="2">Subtotal</td><td>$${subtotal.toFixed(2)}</td>
                </tr>
                <tr>
                    <td colspan="2">Tax</td><td>$${tax.toFixed(2)}</td>
                </tr>
            `;

            document.getElementById('receipt-total-amount').innerHTML = `Total: <span>$${total.toFixed(2)}</span>`;
        }
        
        // --- EVENT LISTENERS ---

        // Add to cart (delegated from menu grid)
        menuGrid.addEventListener('click', (e) => {
            const button = e.target.closest('.add-to-cart-btn');
            if (button && !button.classList.contains('added')) {
                const id = parseInt(button.dataset.id);
                addToCart(id, button);
            }
        });

        // Cart interactions (delegated from cart list)
        cartItemsList.addEventListener('click', (e) => {
            const target = e.target.closest('button');
            if (!target) return;

            const li = target.closest('.cart-item');
            const id = parseInt(li.dataset.id);

            if (target.dataset.action === 'increase') {
                updateItemQuantity(id, 1);
            } else if (target.dataset.action === 'decrease') {
                updateItemQuantity(id, -1);
            } else if (target.classList.contains('remove-btn')) {
                cart = cart.filter(item => item.id !== id);
                updateCartDisplay();
            }
        });
        
        // Main cart actions
        submitOrderBtn.addEventListener('click', submitOrder);
        emptyCartBtn.addEventListener('click', () => {
            cart = [];
            updateCartDisplay();
        });

        // Receipt modal actions
        document.getElementById('print-receipt-btn').addEventListener('click', () => window.print());
        document.getElementById('close-receipt-btn').addEventListener('click', () => {
            receiptModal.classList.remove('visible');
            // Reset for a new order after animation finishes
            setTimeout(() => {
                cart = [];
                updateCartDisplay();
            }, 300);
        });

        // --- INITIALIZATION ---
        renderMenu();
        updateCartDisplay();
    });
    </script>
</body>
</html>
